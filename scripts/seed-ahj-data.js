#!/usr/bin/env node

/**
 * Seed AHJ (Authority Having Jurisdiction) Registry
 *
 * Populates Firestore ahj_registry collection with the top 50 solar
 * jurisdictions across the leading solar states in the US.
 *
 * Uses real jurisdiction names, real state/county data, representative
 * ZIP codes, and known portal/SolarAPP+ participation data.
 *
 * Usage:
 *   node scripts/seed-ahj-data.js
 *
 * Requires:
 *   - firebase-admin
 *   - Service account at ~/projects/solar-crm/firebase-service-account.json
 */

const admin = require("firebase-admin");
const path = require("path");

// Initialize Firebase Admin with service account
const serviceAccount = require(
  path.resolve(__dirname, "../firebase-service-account.json"),
);

admin.initializeApp({
  credential: admin.credential.cert(serviceAccount),
  projectId: "power-to-the-people-vpp",
});

const db = admin.firestore();

// ─── AHJ Data: Top 50 Solar Jurisdictions ────────────────────────────────────

const AHJ_DATA = [
  // ═══ CALIFORNIA ═══
  {
    name: "City of Los Angeles - Department of Building and Safety",
    jurisdiction_type: "city",
    state: "CA",
    county: "Los Angeles",
    city: "Los Angeles",
    zip_codes: [
      "90001",
      "90012",
      "90028",
      "90034",
      "90045",
      "90064",
      "90210",
      "90291",
      "90401",
      "91311",
      "91601",
    ],
    contact: {
      phone: "(213) 482-0000",
      email: "",
      website: "https://www.ladbs.org",
      address: "201 N. Figueroa St, Los Angeles, CA 90012",
    },
    portal: {
      url: "https://www.ladbsservices.lacity.org/onlineservices/",
      type: "web_form",
      automatable: true,
      automation_confidence: 0.7,
    },
    requirements: {
      structural_engineering: true,
      electrical_diagrams: true,
      site_plan: true,
      single_line_diagram: true,
      load_calculations: true,
      equipment_specs: true,
      hoa_approval: false,
      utility_approval: true,
      fire_department_review: true,
      custom_requirements: [
        "Title 24 energy compliance",
        "LADWP interconnection",
      ],
    },
    fees: {
      residential_solar_permit: 500,
      commercial_solar_permit: 1200,
      electrical_permit: 220,
      fee_calculation_method: "Flat fee + valuation-based",
    },
    turnaround: {
      typical_days: 15,
      expedited_available: true,
      expedited_fee: 1000,
      expedited_days: 5,
    },
    solarapp_participant: false,
    notes:
      "LADWP territory. Requires separate LADWP interconnection application. Complex fire setback rules.",
    data_source: "seed_script_v1",
  },
  {
    name: "City of San Diego - Development Services Department",
    jurisdiction_type: "city",
    state: "CA",
    county: "San Diego",
    city: "San Diego",
    zip_codes: [
      "92101",
      "92103",
      "92109",
      "92117",
      "92122",
      "92126",
      "92131",
      "92154",
    ],
    contact: {
      phone: "(619) 446-5000",
      website: "https://www.sandiego.gov/development-services",
      address: "1222 First Ave, San Diego, CA 92101",
    },
    portal: {
      url: "https://aca-prod.accela.com/SANDIEGO/",
      type: "web_form",
      automatable: true,
      automation_confidence: 0.8,
    },
    requirements: {
      structural_engineering: true,
      electrical_diagrams: true,
      site_plan: true,
      single_line_diagram: true,
      load_calculations: true,
      equipment_specs: true,
      hoa_approval: false,
      utility_approval: true,
      fire_department_review: false,
      custom_requirements: ["SDG&E interconnection"],
    },
    fees: {
      residential_solar_permit: 300,
      commercial_solar_permit: 800,
      electrical_permit: 150,
      fee_calculation_method: "Flat fee",
    },
    turnaround: {
      typical_days: 10,
      expedited_available: true,
      expedited_fee: 500,
      expedited_days: 3,
    },
    solarapp_participant: true,
    notes: "SolarAPP+ participant for residential. SDG&E utility territory.",
    data_source: "seed_script_v1",
  },
  {
    name: "City of San Jose - Planning, Building and Code Enforcement",
    jurisdiction_type: "city",
    state: "CA",
    county: "Santa Clara",
    city: "San Jose",
    zip_codes: [
      "95110",
      "95112",
      "95116",
      "95123",
      "95125",
      "95128",
      "95131",
      "95136",
    ],
    contact: {
      phone: "(408) 535-3555",
      website:
        "https://www.sanjoseca.gov/your-government/departments/planning-building-code-enforcement",
      address: "200 E. Santa Clara St, San Jose, CA 95113",
    },
    portal: {
      url: "https://sjpermits.org/permits/",
      type: "web_form",
      automatable: true,
      automation_confidence: 0.75,
    },
    requirements: {
      structural_engineering: true,
      electrical_diagrams: true,
      site_plan: true,
      single_line_diagram: true,
      load_calculations: true,
      equipment_specs: true,
      hoa_approval: false,
      utility_approval: true,
      fire_department_review: false,
      custom_requirements: [],
    },
    fees: {
      residential_solar_permit: 350,
      commercial_solar_permit: 900,
      electrical_permit: 180,
      fee_calculation_method: "Flat fee",
    },
    turnaround: {
      typical_days: 7,
      expedited_available: false,
      expedited_fee: 0,
      expedited_days: 0,
    },
    solarapp_participant: true,
    notes:
      "SolarAPP+ participant. PG&E territory. Streamlined residential solar process.",
    data_source: "seed_script_v1",
  },
  {
    name: "City and County of San Francisco - Department of Building Inspection",
    jurisdiction_type: "city",
    state: "CA",
    county: "San Francisco",
    city: "San Francisco",
    zip_codes: [
      "94102",
      "94103",
      "94107",
      "94110",
      "94112",
      "94114",
      "94116",
      "94118",
      "94122",
      "94132",
    ],
    contact: {
      phone: "(415) 558-6088",
      website: "https://sfdbi.org",
      address: "49 South Van Ness Ave, San Francisco, CA 94103",
    },
    portal: {
      url: "https://dbiweb02.sfgov.org/dbipts/",
      type: "web_form",
      automatable: true,
      automation_confidence: 0.6,
    },
    requirements: {
      structural_engineering: true,
      electrical_diagrams: true,
      site_plan: true,
      single_line_diagram: true,
      load_calculations: true,
      equipment_specs: true,
      hoa_approval: false,
      utility_approval: true,
      fire_department_review: true,
      custom_requirements: ["Historic district review where applicable"],
    },
    fees: {
      residential_solar_permit: 400,
      commercial_solar_permit: 1000,
      electrical_permit: 200,
      fee_calculation_method: "Valuation-based",
    },
    turnaround: {
      typical_days: 14,
      expedited_available: true,
      expedited_fee: 800,
      expedited_days: 5,
    },
    solarapp_participant: false,
    notes:
      "Dense urban environment. Fire setback rules are strict. PG&E territory.",
    data_source: "seed_script_v1",
  },
  {
    name: "City of Sacramento - Community Development Department",
    jurisdiction_type: "city",
    state: "CA",
    county: "Sacramento",
    city: "Sacramento",
    zip_codes: [
      "95811",
      "95814",
      "95816",
      "95818",
      "95820",
      "95822",
      "95824",
      "95828",
      "95831",
      "95835",
    ],
    contact: {
      phone: "(916) 264-5011",
      website: "https://www.cityofsacramento.gov/community-development",
      address: "300 Richards Blvd, Sacramento, CA 95811",
    },
    portal: {
      url: "https://accelaaca.cityofsacramento.org/CitizenAccess/",
      type: "web_form",
      automatable: true,
      automation_confidence: 0.75,
    },
    requirements: {
      structural_engineering: true,
      electrical_diagrams: true,
      site_plan: true,
      single_line_diagram: true,
      load_calculations: true,
      equipment_specs: true,
      hoa_approval: false,
      utility_approval: true,
      fire_department_review: false,
      custom_requirements: ["SMUD interconnection"],
    },
    fees: {
      residential_solar_permit: 250,
      commercial_solar_permit: 700,
      electrical_permit: 130,
      fee_calculation_method: "Flat fee",
    },
    turnaround: {
      typical_days: 5,
      expedited_available: false,
      expedited_fee: 0,
      expedited_days: 0,
    },
    solarapp_participant: true,
    notes:
      "SolarAPP+ participant. SMUD utility territory (municipal). Very solar-friendly.",
    data_source: "seed_script_v1",
  },
  {
    name: "City of Fresno - Development and Resource Management",
    jurisdiction_type: "city",
    state: "CA",
    county: "Fresno",
    city: "Fresno",
    zip_codes: ["93650", "93701", "93702", "93710", "93720", "93722", "93727"],
    contact: {
      phone: "(559) 621-8277",
      website: "https://www.fresno.gov/darm/",
      address: "2600 Fresno St, Fresno, CA 93721",
    },
    portal: {
      url: "https://aca-prod.accela.com/FRESNO/",
      type: "web_form",
      automatable: true,
      automation_confidence: 0.7,
    },
    requirements: {
      structural_engineering: false,
      electrical_diagrams: true,
      site_plan: true,
      single_line_diagram: true,
      load_calculations: true,
      equipment_specs: true,
      hoa_approval: false,
      utility_approval: true,
      fire_department_review: false,
      custom_requirements: [],
    },
    fees: {
      residential_solar_permit: 200,
      commercial_solar_permit: 600,
      electrical_permit: 120,
      fee_calculation_method: "Flat fee",
    },
    turnaround: {
      typical_days: 5,
      expedited_available: false,
      expedited_fee: 0,
      expedited_days: 0,
    },
    solarapp_participant: true,
    notes: "SolarAPP+ participant. PG&E territory. High solar irradiance area.",
    data_source: "seed_script_v1",
  },
  {
    name: "County of Riverside - Building and Safety",
    jurisdiction_type: "county",
    state: "CA",
    county: "Riverside",
    city: "",
    zip_codes: [
      "92201",
      "92203",
      "92220",
      "92230",
      "92240",
      "92260",
      "92270",
      "92553",
    ],
    contact: {
      phone: "(951) 955-3200",
      website: "https://rfrplan.rivcoca.org/building-safety",
      address: "4080 Lemon St, Riverside, CA 92502",
    },
    portal: {
      url: "https://prs.rivcoca.org/",
      type: "web_form",
      automatable: true,
      automation_confidence: 0.65,
    },
    requirements: {
      structural_engineering: true,
      electrical_diagrams: true,
      site_plan: true,
      single_line_diagram: true,
      load_calculations: true,
      equipment_specs: true,
      hoa_approval: false,
      utility_approval: true,
      fire_department_review: false,
      custom_requirements: [],
    },
    fees: {
      residential_solar_permit: 350,
      commercial_solar_permit: 850,
      electrical_permit: 175,
      fee_calculation_method: "Valuation-based",
    },
    turnaround: {
      typical_days: 10,
      expedited_available: false,
      expedited_fee: 0,
      expedited_days: 0,
    },
    solarapp_participant: false,
    notes:
      "Covers unincorporated Riverside County. SCE territory. High solar potential.",
    data_source: "seed_script_v1",
  },

  // ═══ TEXAS ═══
  {
    name: "City of Austin - Development Services Department",
    jurisdiction_type: "city",
    state: "TX",
    county: "Travis",
    city: "Austin",
    zip_codes: [
      "78701",
      "78702",
      "78704",
      "78723",
      "78729",
      "78741",
      "78745",
      "78748",
      "78752",
      "78758",
    ],
    contact: {
      phone: "(512) 978-4000",
      website: "https://www.austintexas.gov/department/development-services",
      address: "6310 Wilhelmina Delco Dr, Austin, TX 78752",
    },
    portal: {
      url: "https://abc.austintexas.gov/web/permit/index",
      type: "web_form",
      automatable: true,
      automation_confidence: 0.8,
    },
    requirements: {
      structural_engineering: false,
      electrical_diagrams: true,
      site_plan: true,
      single_line_diagram: true,
      load_calculations: true,
      equipment_specs: true,
      hoa_approval: false,
      utility_approval: true,
      fire_department_review: false,
      custom_requirements: ["Austin Energy interconnection"],
    },
    fees: {
      residential_solar_permit: 175,
      commercial_solar_permit: 500,
      electrical_permit: 100,
      fee_calculation_method: "Flat fee",
    },
    turnaround: {
      typical_days: 5,
      expedited_available: true,
      expedited_fee: 350,
      expedited_days: 2,
    },
    solarapp_participant: true,
    notes:
      "SolarAPP+ participant. Austin Energy (municipal utility). Very solar-friendly with strong incentives.",
    data_source: "seed_script_v1",
  },
  {
    name: "City of Houston - Public Works and Engineering",
    jurisdiction_type: "city",
    state: "TX",
    county: "Harris",
    city: "Houston",
    zip_codes: [
      "77001",
      "77002",
      "77005",
      "77007",
      "77019",
      "77024",
      "77030",
      "77042",
      "77056",
      "77077",
      "77082",
      "77096",
    ],
    contact: {
      phone: "(832) 394-8800",
      website: "https://www.houstonpermittingcenter.org",
      address: "1002 Washington Ave, Houston, TX 77002",
    },
    portal: {
      url: "https://www.houstonpermittingcenter.org/",
      type: "web_form",
      automatable: true,
      automation_confidence: 0.7,
    },
    requirements: {
      structural_engineering: false,
      electrical_diagrams: true,
      site_plan: true,
      single_line_diagram: true,
      load_calculations: true,
      equipment_specs: true,
      hoa_approval: false,
      utility_approval: true,
      fire_department_review: false,
      custom_requirements: ["CenterPoint Energy interconnection"],
    },
    fees: {
      residential_solar_permit: 150,
      commercial_solar_permit: 450,
      electrical_permit: 80,
      fee_calculation_method: "Flat fee",
    },
    turnaround: {
      typical_days: 7,
      expedited_available: false,
      expedited_fee: 0,
      expedited_days: 0,
    },
    solarapp_participant: false,
    notes:
      "Deregulated electricity market. No single utility. CenterPoint for T&D.",
    data_source: "seed_script_v1",
  },
  {
    name: "City of Dallas - Department of Sustainable Development and Construction",
    jurisdiction_type: "city",
    state: "TX",
    county: "Dallas",
    city: "Dallas",
    zip_codes: [
      "75201",
      "75204",
      "75206",
      "75209",
      "75214",
      "75219",
      "75225",
      "75230",
      "75240",
      "75248",
    ],
    contact: {
      phone: "(214) 948-4480",
      website: "https://dallascityhall.com/departments/sustainabledevelopment",
      address: "1500 Marilla St, Dallas, TX 75201",
    },
    portal: {
      url: "https://developdallas.dallascityhall.com/",
      type: "web_form",
      automatable: true,
      automation_confidence: 0.7,
    },
    requirements: {
      structural_engineering: false,
      electrical_diagrams: true,
      site_plan: true,
      single_line_diagram: true,
      load_calculations: true,
      equipment_specs: true,
      hoa_approval: false,
      utility_approval: true,
      fire_department_review: false,
      custom_requirements: ["Oncor interconnection"],
    },
    fees: {
      residential_solar_permit: 175,
      commercial_solar_permit: 500,
      electrical_permit: 90,
      fee_calculation_method: "Flat fee",
    },
    turnaround: {
      typical_days: 10,
      expedited_available: false,
      expedited_fee: 0,
      expedited_days: 0,
    },
    solarapp_participant: false,
    notes: "Oncor T&D territory. Deregulated market.",
    data_source: "seed_script_v1",
  },
  {
    name: "City of San Antonio - Development Services Department",
    jurisdiction_type: "city",
    state: "TX",
    county: "Bexar",
    city: "San Antonio",
    zip_codes: [
      "78201",
      "78204",
      "78207",
      "78209",
      "78212",
      "78216",
      "78223",
      "78228",
      "78233",
      "78240",
      "78245",
    ],
    contact: {
      phone: "(210) 207-1111",
      website: "https://www.sanantonio.gov/DSD",
      address: "1901 S. Alamo St, San Antonio, TX 78204",
    },
    portal: {
      url: "https://www.sanantonio.gov/DSD/Online-Services",
      type: "web_form",
      automatable: true,
      automation_confidence: 0.65,
    },
    requirements: {
      structural_engineering: false,
      electrical_diagrams: true,
      site_plan: true,
      single_line_diagram: true,
      load_calculations: true,
      equipment_specs: true,
      hoa_approval: false,
      utility_approval: true,
      fire_department_review: false,
      custom_requirements: ["CPS Energy interconnection"],
    },
    fees: {
      residential_solar_permit: 125,
      commercial_solar_permit: 400,
      electrical_permit: 75,
      fee_calculation_method: "Flat fee",
    },
    turnaround: {
      typical_days: 7,
      expedited_available: false,
      expedited_fee: 0,
      expedited_days: 0,
    },
    solarapp_participant: false,
    notes:
      "CPS Energy (municipal utility) territory. No federal ITC for residential cash/loan — FEOC compliance not required here. Good market for cheap non-compliant panels.",
    data_source: "seed_script_v1",
  },
  {
    name: "City of El Paso - Development Services Department",
    jurisdiction_type: "city",
    state: "TX",
    county: "El Paso",
    city: "El Paso",
    zip_codes: ["79901", "79902", "79903", "79912", "79924", "79925", "79936"],
    contact: {
      phone: "(915) 212-0095",
      website: "https://www.elpasotexas.gov/development-services/",
      address: "801 Texas Ave, El Paso, TX 79901",
    },
    portal: {
      url: "https://www.elpasotexas.gov/development-services/online-services/",
      type: "web_form",
      automatable: true,
      automation_confidence: 0.6,
    },
    requirements: {
      structural_engineering: false,
      electrical_diagrams: true,
      site_plan: true,
      single_line_diagram: true,
      load_calculations: true,
      equipment_specs: true,
      hoa_approval: false,
      utility_approval: true,
      fire_department_review: false,
      custom_requirements: ["El Paso Electric interconnection"],
    },
    fees: {
      residential_solar_permit: 100,
      commercial_solar_permit: 350,
      electrical_permit: 60,
      fee_calculation_method: "Flat fee",
    },
    turnaround: {
      typical_days: 7,
      expedited_available: false,
      expedited_fee: 0,
      expedited_days: 0,
    },
    solarapp_participant: false,
    notes:
      "El Paso Electric territory. Excellent solar irradiance. Border city.",
    data_source: "seed_script_v1",
  },

  // ═══ FLORIDA ═══
  {
    name: "Miami-Dade County - Building Department",
    jurisdiction_type: "county",
    state: "FL",
    county: "Miami-Dade",
    city: "",
    zip_codes: [
      "33010",
      "33012",
      "33125",
      "33127",
      "33130",
      "33133",
      "33139",
      "33142",
      "33155",
      "33176",
    ],
    contact: {
      phone: "(786) 315-2000",
      website: "https://www.miamidade.gov/permits/",
      address: "11805 SW 26th St, Miami, FL 33175",
    },
    portal: {
      url: "https://www.miamidade.gov/permits/online-services.asp",
      type: "web_form",
      automatable: true,
      automation_confidence: 0.6,
    },
    requirements: {
      structural_engineering: true,
      electrical_diagrams: true,
      site_plan: true,
      single_line_diagram: true,
      load_calculations: true,
      equipment_specs: true,
      hoa_approval: false,
      utility_approval: true,
      fire_department_review: false,
      custom_requirements: [
        "Wind load calculations (hurricane zone)",
        "FPL interconnection",
        "NOA (Notice of Acceptance) for all equipment",
      ],
    },
    fees: {
      residential_solar_permit: 400,
      commercial_solar_permit: 1000,
      electrical_permit: 200,
      fee_calculation_method: "Valuation-based",
    },
    turnaround: {
      typical_days: 14,
      expedited_available: true,
      expedited_fee: 800,
      expedited_days: 5,
    },
    solarapp_participant: false,
    notes:
      "High-velocity hurricane zone (HVHZ). Stricter structural requirements than rest of FL. FPL territory.",
    data_source: "seed_script_v1",
  },
  {
    name: "Hillsborough County - Building Services",
    jurisdiction_type: "county",
    state: "FL",
    county: "Hillsborough",
    city: "",
    zip_codes: [
      "33510",
      "33511",
      "33534",
      "33547",
      "33569",
      "33570",
      "33584",
      "33594",
      "33602",
      "33610",
      "33614",
    ],
    contact: {
      phone: "(813) 272-5600",
      website:
        "https://www.hillsboroughcounty.org/en/residents/property-owners-and-renters/building-and-renovations",
      address: "601 E. Kennedy Blvd, Tampa, FL 33602",
    },
    portal: {
      url: "https://aca-prod.accela.com/Hillsborough/",
      type: "web_form",
      automatable: true,
      automation_confidence: 0.7,
    },
    requirements: {
      structural_engineering: true,
      electrical_diagrams: true,
      site_plan: true,
      single_line_diagram: true,
      load_calculations: true,
      equipment_specs: true,
      hoa_approval: false,
      utility_approval: true,
      fire_department_review: false,
      custom_requirements: ["Wind load calculations", "TECO interconnection"],
    },
    fees: {
      residential_solar_permit: 300,
      commercial_solar_permit: 750,
      electrical_permit: 150,
      fee_calculation_method: "Flat fee + valuation",
    },
    turnaround: {
      typical_days: 10,
      expedited_available: true,
      expedited_fee: 600,
      expedited_days: 3,
    },
    solarapp_participant: false,
    notes: "Covers Tampa area (unincorporated). TECO Energy territory.",
    data_source: "seed_script_v1",
  },
  {
    name: "Orange County - Building Division",
    jurisdiction_type: "county",
    state: "FL",
    county: "Orange",
    city: "",
    zip_codes: [
      "32801",
      "32803",
      "32806",
      "32809",
      "32812",
      "32819",
      "32822",
      "32826",
      "32832",
      "32839",
    ],
    contact: {
      phone: "(407) 836-5550",
      website: "https://www.ocfl.net/permittinglicensing/",
      address: "201 S. Rosalind Ave, Orlando, FL 32801",
    },
    portal: {
      url: "https://ocfl-energov.tylerhost.net/apps/SelfService",
      type: "web_form",
      automatable: true,
      automation_confidence: 0.7,
    },
    requirements: {
      structural_engineering: true,
      electrical_diagrams: true,
      site_plan: true,
      single_line_diagram: true,
      load_calculations: true,
      equipment_specs: true,
      hoa_approval: false,
      utility_approval: true,
      fire_department_review: false,
      custom_requirements: ["OUC or Duke Energy interconnection"],
    },
    fees: {
      residential_solar_permit: 275,
      commercial_solar_permit: 700,
      electrical_permit: 140,
      fee_calculation_method: "Flat fee",
    },
    turnaround: {
      typical_days: 10,
      expedited_available: false,
      expedited_fee: 0,
      expedited_days: 0,
    },
    solarapp_participant: false,
    notes: "Orlando area. OUC (municipal) and Duke Energy territories.",
    data_source: "seed_script_v1",
  },
  {
    name: "City of Jacksonville - Building Inspection Division",
    jurisdiction_type: "city",
    state: "FL",
    county: "Duval",
    city: "Jacksonville",
    zip_codes: [
      "32099",
      "32202",
      "32204",
      "32206",
      "32207",
      "32210",
      "32211",
      "32216",
      "32218",
      "32225",
      "32246",
    ],
    contact: {
      phone: "(904) 630-1100",
      website:
        "https://www.coj.net/departments/neighborhoods/building-inspection",
      address: "214 N. Hogan St, Jacksonville, FL 32202",
    },
    portal: {
      url: "https://buildinginspections.coj.net/",
      type: "web_form",
      automatable: true,
      automation_confidence: 0.65,
    },
    requirements: {
      structural_engineering: true,
      electrical_diagrams: true,
      site_plan: true,
      single_line_diagram: true,
      load_calculations: true,
      equipment_specs: true,
      hoa_approval: false,
      utility_approval: true,
      fire_department_review: false,
      custom_requirements: ["JEA interconnection"],
    },
    fees: {
      residential_solar_permit: 250,
      commercial_solar_permit: 650,
      electrical_permit: 120,
      fee_calculation_method: "Flat fee",
    },
    turnaround: {
      typical_days: 10,
      expedited_available: false,
      expedited_fee: 0,
      expedited_days: 0,
    },
    solarapp_participant: false,
    notes: "Consolidated city-county. JEA (municipal utility) territory.",
    data_source: "seed_script_v1",
  },

  // ═══ ARIZONA ═══
  {
    name: "City of Phoenix - Planning and Development Department",
    jurisdiction_type: "city",
    state: "AZ",
    county: "Maricopa",
    city: "Phoenix",
    zip_codes: [
      "85003",
      "85004",
      "85006",
      "85008",
      "85013",
      "85016",
      "85020",
      "85027",
      "85032",
      "85040",
      "85044",
      "85048",
    ],
    contact: {
      phone: "(602) 262-7811",
      website: "https://www.phoenix.gov/pdd",
      address: "200 W. Washington St, Phoenix, AZ 85003",
    },
    portal: {
      url: "https://pdd.phoenix.gov/pd3",
      type: "web_form",
      automatable: true,
      automation_confidence: 0.75,
    },
    requirements: {
      structural_engineering: false,
      electrical_diagrams: true,
      site_plan: true,
      single_line_diagram: true,
      load_calculations: true,
      equipment_specs: true,
      hoa_approval: false,
      utility_approval: true,
      fire_department_review: false,
      custom_requirements: ["APS or SRP interconnection"],
    },
    fees: {
      residential_solar_permit: 200,
      commercial_solar_permit: 500,
      electrical_permit: 100,
      fee_calculation_method: "Flat fee",
    },
    turnaround: {
      typical_days: 5,
      expedited_available: true,
      expedited_fee: 400,
      expedited_days: 2,
    },
    solarapp_participant: true,
    notes:
      "SolarAPP+ participant. APS and SRP utility territories. Highest solar irradiance in the country.",
    data_source: "seed_script_v1",
  },
  {
    name: "City of Tucson - Planning and Development Services",
    jurisdiction_type: "city",
    state: "AZ",
    county: "Pima",
    city: "Tucson",
    zip_codes: [
      "85701",
      "85705",
      "85710",
      "85711",
      "85713",
      "85716",
      "85718",
      "85730",
      "85741",
      "85745",
    ],
    contact: {
      phone: "(520) 791-5550",
      website: "https://www.tucsonaz.gov/pdsd",
      address: "201 N. Stone Ave, Tucson, AZ 85701",
    },
    portal: {
      url: "https://apps2.tucsonaz.gov/citizenaccess/",
      type: "web_form",
      automatable: true,
      automation_confidence: 0.7,
    },
    requirements: {
      structural_engineering: false,
      electrical_diagrams: true,
      site_plan: true,
      single_line_diagram: true,
      load_calculations: true,
      equipment_specs: true,
      hoa_approval: false,
      utility_approval: true,
      fire_department_review: false,
      custom_requirements: ["TEP interconnection"],
    },
    fees: {
      residential_solar_permit: 175,
      commercial_solar_permit: 450,
      electrical_permit: 90,
      fee_calculation_method: "Flat fee",
    },
    turnaround: {
      typical_days: 5,
      expedited_available: false,
      expedited_fee: 0,
      expedited_days: 0,
    },
    solarapp_participant: true,
    notes: "SolarAPP+ participant. TEP utility territory. Strong solar market.",
    data_source: "seed_script_v1",
  },
  {
    name: "City of Scottsdale - Building Division",
    jurisdiction_type: "city",
    state: "AZ",
    county: "Maricopa",
    city: "Scottsdale",
    zip_codes: [
      "85250",
      "85251",
      "85254",
      "85255",
      "85257",
      "85258",
      "85260",
      "85266",
    ],
    contact: {
      phone: "(480) 312-2500",
      website: "https://www.scottsdaleaz.gov/building",
      address: "7447 E. Indian School Rd, Scottsdale, AZ 85251",
    },
    portal: {
      url: "https://eservices.scottsdaleaz.gov/bldgresources/",
      type: "web_form",
      automatable: true,
      automation_confidence: 0.7,
    },
    requirements: {
      structural_engineering: false,
      electrical_diagrams: true,
      site_plan: true,
      single_line_diagram: true,
      load_calculations: true,
      equipment_specs: true,
      hoa_approval: true,
      utility_approval: true,
      fire_department_review: false,
      custom_requirements: [
        "SRP interconnection",
        "HOA review common in this jurisdiction",
      ],
    },
    fees: {
      residential_solar_permit: 225,
      commercial_solar_permit: 550,
      electrical_permit: 110,
      fee_calculation_method: "Flat fee",
    },
    turnaround: {
      typical_days: 7,
      expedited_available: false,
      expedited_fee: 0,
      expedited_days: 0,
    },
    solarapp_participant: false,
    notes:
      "SRP territory. Many HOA-restricted communities. Higher-end residential market.",
    data_source: "seed_script_v1",
  },

  // ═══ NEVADA ═══
  {
    name: "Clark County - Building and Fire Prevention",
    jurisdiction_type: "county",
    state: "NV",
    county: "Clark",
    city: "",
    zip_codes: [
      "89002",
      "89011",
      "89012",
      "89014",
      "89015",
      "89030",
      "89031",
      "89032",
      "89044",
      "89052",
      "89074",
      "89084",
    ],
    contact: {
      phone: "(702) 455-8000",
      website: "https://www.clarkcountynv.gov/building",
      address: "4701 W. Russell Rd, Las Vegas, NV 89118",
    },
    portal: {
      url: "https://citizenaccess.clarkcountynv.gov/citizenaccess/",
      type: "web_form",
      automatable: true,
      automation_confidence: 0.7,
    },
    requirements: {
      structural_engineering: false,
      electrical_diagrams: true,
      site_plan: true,
      single_line_diagram: true,
      load_calculations: true,
      equipment_specs: true,
      hoa_approval: false,
      utility_approval: true,
      fire_department_review: false,
      custom_requirements: ["NV Energy interconnection"],
    },
    fees: {
      residential_solar_permit: 250,
      commercial_solar_permit: 600,
      electrical_permit: 125,
      fee_calculation_method: "Flat fee",
    },
    turnaround: {
      typical_days: 7,
      expedited_available: true,
      expedited_fee: 500,
      expedited_days: 3,
    },
    solarapp_participant: false,
    notes:
      "Covers Las Vegas valley (unincorporated). NV Energy territory. Massive solar market.",
    data_source: "seed_script_v1",
  },
  {
    name: "City of Las Vegas - Planning Department",
    jurisdiction_type: "city",
    state: "NV",
    county: "Clark",
    city: "Las Vegas",
    zip_codes: [
      "89101",
      "89102",
      "89104",
      "89106",
      "89107",
      "89108",
      "89110",
      "89117",
      "89128",
      "89130",
      "89131",
      "89134",
      "89145",
      "89149",
    ],
    contact: {
      phone: "(702) 229-6301",
      website: "https://www.lasvegasnevada.gov/Business/Planning",
      address: "333 N. Rancho Dr, Las Vegas, NV 89106",
    },
    portal: {
      url: "https://www.lasvegasnevada.gov/Business/Permits",
      type: "web_form",
      automatable: true,
      automation_confidence: 0.65,
    },
    requirements: {
      structural_engineering: false,
      electrical_diagrams: true,
      site_plan: true,
      single_line_diagram: true,
      load_calculations: true,
      equipment_specs: true,
      hoa_approval: false,
      utility_approval: true,
      fire_department_review: false,
      custom_requirements: ["NV Energy interconnection"],
    },
    fees: {
      residential_solar_permit: 225,
      commercial_solar_permit: 550,
      electrical_permit: 110,
      fee_calculation_method: "Flat fee",
    },
    turnaround: {
      typical_days: 7,
      expedited_available: false,
      expedited_fee: 0,
      expedited_days: 0,
    },
    solarapp_participant: false,
    notes:
      "City of Las Vegas proper (distinct from Clark County). NV Energy territory.",
    data_source: "seed_script_v1",
  },
  {
    name: "City of Reno - Community Development Department",
    jurisdiction_type: "city",
    state: "NV",
    county: "Washoe",
    city: "Reno",
    zip_codes: [
      "89501",
      "89502",
      "89503",
      "89506",
      "89509",
      "89511",
      "89512",
      "89519",
      "89521",
    ],
    contact: {
      phone: "(775) 334-2090",
      website:
        "https://www.reno.gov/government/departments/community-development-department",
      address: "1 E. First St, Reno, NV 89501",
    },
    portal: {
      url: "https://aca-prod.accela.com/RENO/",
      type: "web_form",
      automatable: true,
      automation_confidence: 0.7,
    },
    requirements: {
      structural_engineering: false,
      electrical_diagrams: true,
      site_plan: true,
      single_line_diagram: true,
      load_calculations: true,
      equipment_specs: true,
      hoa_approval: false,
      utility_approval: true,
      fire_department_review: false,
      custom_requirements: ["NV Energy interconnection"],
    },
    fees: {
      residential_solar_permit: 200,
      commercial_solar_permit: 500,
      electrical_permit: 100,
      fee_calculation_method: "Flat fee",
    },
    turnaround: {
      typical_days: 7,
      expedited_available: false,
      expedited_fee: 0,
      expedited_days: 0,
    },
    solarapp_participant: false,
    notes: "NV Energy territory. Growing solar market in northern Nevada.",
    data_source: "seed_script_v1",
  },

  // ═══ COLORADO ═══
  {
    name: "City and County of Denver - Community Planning and Development",
    jurisdiction_type: "city",
    state: "CO",
    county: "Denver",
    city: "Denver",
    zip_codes: [
      "80202",
      "80203",
      "80204",
      "80205",
      "80206",
      "80207",
      "80209",
      "80210",
      "80211",
      "80212",
      "80218",
      "80220",
      "80222",
      "80224",
      "80227",
      "80230",
      "80237",
      "80239",
      "80247",
      "80249",
    ],
    contact: {
      phone: "(720) 865-2705",
      website:
        "https://www.denvergov.org/Government/Agencies-Departments-Offices/Community-Planning-and-Development",
      address: "201 W. Colfax Ave, Denver, CO 80202",
    },
    portal: {
      url: "https://www.denvergov.org/Government/Agencies-Departments-Offices/Community-Planning-and-Development/Online-Services",
      type: "web_form",
      automatable: true,
      automation_confidence: 0.7,
    },
    requirements: {
      structural_engineering: false,
      electrical_diagrams: true,
      site_plan: true,
      single_line_diagram: true,
      load_calculations: true,
      equipment_specs: true,
      hoa_approval: false,
      utility_approval: true,
      fire_department_review: false,
      custom_requirements: ["Xcel Energy interconnection"],
    },
    fees: {
      residential_solar_permit: 200,
      commercial_solar_permit: 500,
      electrical_permit: 100,
      fee_calculation_method: "Flat fee",
    },
    turnaround: {
      typical_days: 7,
      expedited_available: true,
      expedited_fee: 400,
      expedited_days: 3,
    },
    solarapp_participant: true,
    notes:
      "SolarAPP+ participant. Xcel Energy territory. Consolidated city-county.",
    data_source: "seed_script_v1",
  },
  {
    name: "City of Colorado Springs - Regional Building Department",
    jurisdiction_type: "city",
    state: "CO",
    county: "El Paso",
    city: "Colorado Springs",
    zip_codes: [
      "80903",
      "80904",
      "80905",
      "80906",
      "80907",
      "80909",
      "80910",
      "80915",
      "80916",
      "80917",
      "80918",
      "80920",
      "80922",
      "80923",
      "80924",
      "80925",
    ],
    contact: {
      phone: "(719) 327-2880",
      website: "https://www.pprbd.org",
      address: "2880 International Circle, Colorado Springs, CO 80910",
    },
    portal: {
      url: "https://www.pprbd.org/Online-Services",
      type: "web_form",
      automatable: true,
      automation_confidence: 0.65,
    },
    requirements: {
      structural_engineering: false,
      electrical_diagrams: true,
      site_plan: true,
      single_line_diagram: true,
      load_calculations: true,
      equipment_specs: true,
      hoa_approval: false,
      utility_approval: true,
      fire_department_review: false,
      custom_requirements: ["Colorado Springs Utilities interconnection"],
    },
    fees: {
      residential_solar_permit: 175,
      commercial_solar_permit: 450,
      electrical_permit: 90,
      fee_calculation_method: "Flat fee",
    },
    turnaround: {
      typical_days: 7,
      expedited_available: false,
      expedited_fee: 0,
      expedited_days: 0,
    },
    solarapp_participant: false,
    notes:
      "Pikes Peak Regional Building Department. Colorado Springs Utilities (municipal).",
    data_source: "seed_script_v1",
  },

  // ═══ NEW YORK ═══
  {
    name: "New York City - Department of Buildings (Manhattan)",
    jurisdiction_type: "city",
    state: "NY",
    county: "New York",
    city: "New York",
    zip_codes: [
      "10001",
      "10003",
      "10010",
      "10011",
      "10016",
      "10019",
      "10022",
      "10025",
      "10029",
      "10032",
      "10036",
      "10040",
    ],
    contact: {
      phone: "(212) 393-2550",
      website: "https://www.nyc.gov/buildings",
      address: "280 Broadway, New York, NY 10007",
    },
    portal: {
      url: "https://a810-bisweb.nyc.gov/bisweb/bispi00.jsp",
      type: "web_form",
      automatable: true,
      automation_confidence: 0.5,
    },
    requirements: {
      structural_engineering: true,
      electrical_diagrams: true,
      site_plan: true,
      single_line_diagram: true,
      load_calculations: true,
      equipment_specs: true,
      hoa_approval: false,
      utility_approval: true,
      fire_department_review: true,
      custom_requirements: [
        "Con Edison interconnection",
        "FDNY review",
        "Landmarks Commission review (if applicable)",
        "PE-stamped structural analysis",
      ],
    },
    fees: {
      residential_solar_permit: 600,
      commercial_solar_permit: 1500,
      electrical_permit: 300,
      fee_calculation_method: "Valuation-based",
    },
    turnaround: {
      typical_days: 30,
      expedited_available: true,
      expedited_fee: 2000,
      expedited_days: 10,
    },
    solarapp_participant: false,
    notes:
      "NYC DOB covers all 5 boroughs. Very complex permitting. Con Edison territory. Professional Engineer (PE) stamp required.",
    data_source: "seed_script_v1",
  },
  {
    name: "New York City - Department of Buildings (Brooklyn)",
    jurisdiction_type: "city",
    state: "NY",
    county: "Kings",
    city: "Brooklyn",
    zip_codes: [
      "11201",
      "11205",
      "11206",
      "11207",
      "11209",
      "11211",
      "11215",
      "11217",
      "11220",
      "11225",
      "11229",
      "11231",
      "11235",
      "11237",
    ],
    contact: {
      phone: "(212) 393-2550",
      website: "https://www.nyc.gov/buildings",
      address: "280 Broadway, New York, NY 10007",
    },
    portal: {
      url: "https://a810-bisweb.nyc.gov/bisweb/bispi00.jsp",
      type: "web_form",
      automatable: true,
      automation_confidence: 0.5,
    },
    requirements: {
      structural_engineering: true,
      electrical_diagrams: true,
      site_plan: true,
      single_line_diagram: true,
      load_calculations: true,
      equipment_specs: true,
      hoa_approval: false,
      utility_approval: true,
      fire_department_review: true,
      custom_requirements: [
        "Con Edison interconnection",
        "FDNY review",
        "PE-stamped structural analysis",
      ],
    },
    fees: {
      residential_solar_permit: 600,
      commercial_solar_permit: 1500,
      electrical_permit: 300,
      fee_calculation_method: "Valuation-based",
    },
    turnaround: {
      typical_days: 30,
      expedited_available: true,
      expedited_fee: 2000,
      expedited_days: 10,
    },
    solarapp_participant: false,
    notes:
      "Same NYC DOB. Brooklyn has significant flat-roof multifamily solar potential.",
    data_source: "seed_script_v1",
  },
  {
    name: "New York City - Department of Buildings (Queens)",
    jurisdiction_type: "city",
    state: "NY",
    county: "Queens",
    city: "Queens",
    zip_codes: [
      "11101",
      "11103",
      "11104",
      "11106",
      "11354",
      "11355",
      "11360",
      "11373",
      "11375",
      "11385",
      "11413",
      "11418",
      "11432",
    ],
    contact: {
      phone: "(212) 393-2550",
      website: "https://www.nyc.gov/buildings",
      address: "280 Broadway, New York, NY 10007",
    },
    portal: {
      url: "https://a810-bisweb.nyc.gov/bisweb/bispi00.jsp",
      type: "web_form",
      automatable: true,
      automation_confidence: 0.5,
    },
    requirements: {
      structural_engineering: true,
      electrical_diagrams: true,
      site_plan: true,
      single_line_diagram: true,
      load_calculations: true,
      equipment_specs: true,
      hoa_approval: false,
      utility_approval: true,
      fire_department_review: true,
      custom_requirements: [
        "Con Edison interconnection",
        "FDNY review",
        "PE-stamped structural analysis",
      ],
    },
    fees: {
      residential_solar_permit: 600,
      commercial_solar_permit: 1500,
      electrical_permit: 300,
      fee_calculation_method: "Valuation-based",
    },
    turnaround: {
      typical_days: 30,
      expedited_available: true,
      expedited_fee: 2000,
      expedited_days: 10,
    },
    solarapp_participant: false,
    notes:
      "Same NYC DOB. Queens has mix of single-family and multifamily solar opportunity.",
    data_source: "seed_script_v1",
  },
  {
    name: "New York City - Department of Buildings (Staten Island)",
    jurisdiction_type: "city",
    state: "NY",
    county: "Richmond",
    city: "Staten Island",
    zip_codes: [
      "10301",
      "10304",
      "10305",
      "10306",
      "10308",
      "10309",
      "10310",
      "10312",
      "10314",
    ],
    contact: {
      phone: "(212) 393-2550",
      website: "https://www.nyc.gov/buildings",
      address: "280 Broadway, New York, NY 10007",
    },
    portal: {
      url: "https://a810-bisweb.nyc.gov/bisweb/bispi00.jsp",
      type: "web_form",
      automatable: true,
      automation_confidence: 0.5,
    },
    requirements: {
      structural_engineering: true,
      electrical_diagrams: true,
      site_plan: true,
      single_line_diagram: true,
      load_calculations: true,
      equipment_specs: true,
      hoa_approval: false,
      utility_approval: true,
      fire_department_review: true,
      custom_requirements: [
        "Con Edison interconnection",
        "FDNY review",
        "PE-stamped structural analysis",
      ],
    },
    fees: {
      residential_solar_permit: 600,
      commercial_solar_permit: 1500,
      electrical_permit: 300,
      fee_calculation_method: "Valuation-based",
    },
    turnaround: {
      typical_days: 30,
      expedited_available: true,
      expedited_fee: 2000,
      expedited_days: 10,
    },
    solarapp_participant: false,
    notes:
      "Same NYC DOB. Staten Island has highest single-family rooftop solar adoption in NYC.",
    data_source: "seed_script_v1",
  },
  {
    name: "New York City - Department of Buildings (Bronx)",
    jurisdiction_type: "city",
    state: "NY",
    county: "Bronx",
    city: "Bronx",
    zip_codes: [
      "10451",
      "10452",
      "10453",
      "10456",
      "10457",
      "10458",
      "10460",
      "10461",
      "10462",
      "10463",
      "10465",
      "10467",
      "10469",
      "10471",
      "10473",
    ],
    contact: {
      phone: "(212) 393-2550",
      website: "https://www.nyc.gov/buildings",
      address: "280 Broadway, New York, NY 10007",
    },
    portal: {
      url: "https://a810-bisweb.nyc.gov/bisweb/bispi00.jsp",
      type: "web_form",
      automatable: true,
      automation_confidence: 0.5,
    },
    requirements: {
      structural_engineering: true,
      electrical_diagrams: true,
      site_plan: true,
      single_line_diagram: true,
      load_calculations: true,
      equipment_specs: true,
      hoa_approval: false,
      utility_approval: true,
      fire_department_review: true,
      custom_requirements: [
        "Con Edison interconnection",
        "FDNY review",
        "PE-stamped structural analysis",
      ],
    },
    fees: {
      residential_solar_permit: 600,
      commercial_solar_permit: 1500,
      electrical_permit: 300,
      fee_calculation_method: "Valuation-based",
    },
    turnaround: {
      typical_days: 30,
      expedited_available: true,
      expedited_fee: 2000,
      expedited_days: 10,
    },
    solarapp_participant: false,
    notes:
      "Same NYC DOB. Bronx has community solar and multifamily opportunities.",
    data_source: "seed_script_v1",
  },

  // ═══ NEW JERSEY ═══
  {
    name: "City of Newark - Division of Engineering",
    jurisdiction_type: "city",
    state: "NJ",
    county: "Essex",
    city: "Newark",
    zip_codes: [
      "07102",
      "07103",
      "07104",
      "07105",
      "07106",
      "07107",
      "07108",
      "07112",
      "07114",
    ],
    contact: {
      phone: "(973) 733-3860",
      website: "https://www.newarknj.gov/departments/engineering",
      address: "920 Broad St, Newark, NJ 07102",
    },
    portal: {
      url: "https://www.newarknj.gov/card/building-permits",
      type: "web_form",
      automatable: true,
      automation_confidence: 0.5,
    },
    requirements: {
      structural_engineering: true,
      electrical_diagrams: true,
      site_plan: true,
      single_line_diagram: true,
      load_calculations: true,
      equipment_specs: true,
      hoa_approval: false,
      utility_approval: true,
      fire_department_review: false,
      custom_requirements: ["PSE&G interconnection", "NJ UCC compliance"],
    },
    fees: {
      residential_solar_permit: 300,
      commercial_solar_permit: 800,
      electrical_permit: 150,
      fee_calculation_method: "Valuation-based",
    },
    turnaround: {
      typical_days: 14,
      expedited_available: false,
      expedited_fee: 0,
      expedited_days: 0,
    },
    solarapp_participant: false,
    notes:
      "PSE&G territory. Strong NJ solar incentives (SRECs/TREC). UCC-compliant process.",
    data_source: "seed_script_v1",
  },
  {
    name: "City of Jersey City - Division of Construction Code Enforcement",
    jurisdiction_type: "city",
    state: "NJ",
    county: "Hudson",
    city: "Jersey City",
    zip_codes: ["07302", "07304", "07305", "07306", "07307", "07310"],
    contact: {
      phone: "(201) 547-5153",
      website: "https://www.jerseycitynj.gov/CityHall/housing/constructioncode",
      address: "1 Jackson Square, Jersey City, NJ 07305",
    },
    portal: {
      url: "https://www.jerseycitynj.gov/CityHall/housing/constructioncode/permits",
      type: "web_form",
      automatable: true,
      automation_confidence: 0.5,
    },
    requirements: {
      structural_engineering: true,
      electrical_diagrams: true,
      site_plan: true,
      single_line_diagram: true,
      load_calculations: true,
      equipment_specs: true,
      hoa_approval: false,
      utility_approval: true,
      fire_department_review: false,
      custom_requirements: ["PSE&G interconnection", "NJ UCC compliance"],
    },
    fees: {
      residential_solar_permit: 275,
      commercial_solar_permit: 750,
      electrical_permit: 140,
      fee_calculation_method: "Valuation-based",
    },
    turnaround: {
      typical_days: 14,
      expedited_available: false,
      expedited_fee: 0,
      expedited_days: 0,
    },
    solarapp_participant: false,
    notes:
      "PSE&G territory. Growing solar adoption. NJ UCC state-level codes apply.",
    data_source: "seed_script_v1",
  },

  // ═══ MASSACHUSETTS ═══
  {
    name: "City of Boston - Inspectional Services Department",
    jurisdiction_type: "city",
    state: "MA",
    county: "Suffolk",
    city: "Boston",
    zip_codes: [
      "02101",
      "02108",
      "02109",
      "02110",
      "02111",
      "02113",
      "02114",
      "02115",
      "02116",
      "02118",
      "02119",
      "02120",
      "02121",
      "02122",
      "02124",
      "02125",
      "02126",
      "02127",
      "02128",
      "02129",
      "02130",
      "02131",
      "02132",
      "02134",
      "02135",
      "02136",
    ],
    contact: {
      phone: "(617) 635-5300",
      website: "https://www.boston.gov/departments/inspectional-services",
      address: "1010 Massachusetts Ave, Boston, MA 02118",
    },
    portal: {
      url: "https://www.boston.gov/departments/inspectional-services/how-get-building-permit",
      type: "web_form",
      automatable: true,
      automation_confidence: 0.6,
    },
    requirements: {
      structural_engineering: true,
      electrical_diagrams: true,
      site_plan: true,
      single_line_diagram: true,
      load_calculations: true,
      equipment_specs: true,
      hoa_approval: false,
      utility_approval: true,
      fire_department_review: true,
      custom_requirements: [
        "Eversource interconnection",
        "Historic commission review (if applicable)",
      ],
    },
    fees: {
      residential_solar_permit: 350,
      commercial_solar_permit: 900,
      electrical_permit: 175,
      fee_calculation_method: "Valuation-based",
    },
    turnaround: {
      typical_days: 14,
      expedited_available: false,
      expedited_fee: 0,
      expedited_days: 0,
    },
    solarapp_participant: false,
    notes:
      "Eversource territory. SMART program solar incentives. Historic districts add complexity.",
    data_source: "seed_script_v1",
  },

  // ═══ NORTH CAROLINA ═══
  {
    name: "City of Charlotte - Code Enforcement Division",
    jurisdiction_type: "city",
    state: "NC",
    county: "Mecklenburg",
    city: "Charlotte",
    zip_codes: [
      "28202",
      "28203",
      "28204",
      "28205",
      "28206",
      "28207",
      "28208",
      "28209",
      "28210",
      "28211",
      "28212",
      "28215",
      "28216",
      "28217",
      "28226",
      "28227",
    ],
    contact: {
      phone: "(980) 314-1677",
      website: "https://www.charlottenc.gov/Development/Building-Permits",
      address: "600 E. Fourth St, Charlotte, NC 28202",
    },
    portal: {
      url: "https://epermits.charlottenc.gov/",
      type: "web_form",
      automatable: true,
      automation_confidence: 0.7,
    },
    requirements: {
      structural_engineering: false,
      electrical_diagrams: true,
      site_plan: true,
      single_line_diagram: true,
      load_calculations: true,
      equipment_specs: true,
      hoa_approval: false,
      utility_approval: true,
      fire_department_review: false,
      custom_requirements: ["Duke Energy interconnection"],
    },
    fees: {
      residential_solar_permit: 200,
      commercial_solar_permit: 500,
      electrical_permit: 100,
      fee_calculation_method: "Flat fee",
    },
    turnaround: {
      typical_days: 7,
      expedited_available: true,
      expedited_fee: 400,
      expedited_days: 3,
    },
    solarapp_participant: false,
    notes: "Duke Energy territory. Growing solar market in the Carolinas.",
    data_source: "seed_script_v1",
  },
  {
    name: "City of Raleigh - Development Services",
    jurisdiction_type: "city",
    state: "NC",
    county: "Wake",
    city: "Raleigh",
    zip_codes: [
      "27601",
      "27603",
      "27604",
      "27605",
      "27606",
      "27607",
      "27608",
      "27609",
      "27610",
      "27612",
      "27613",
      "27614",
      "27615",
      "27616",
      "27617",
    ],
    contact: {
      phone: "(919) 996-2495",
      website:
        "https://raleighnc.gov/services/building-and-construction/building-permits",
      address: "1 Exchange Plaza, Raleigh, NC 27601",
    },
    portal: {
      url: "https://raleighnc.gov/services/building-and-construction/apply-building-permit-online",
      type: "web_form",
      automatable: true,
      automation_confidence: 0.7,
    },
    requirements: {
      structural_engineering: false,
      electrical_diagrams: true,
      site_plan: true,
      single_line_diagram: true,
      load_calculations: true,
      equipment_specs: true,
      hoa_approval: false,
      utility_approval: true,
      fire_department_review: false,
      custom_requirements: ["Duke Energy interconnection"],
    },
    fees: {
      residential_solar_permit: 175,
      commercial_solar_permit: 450,
      electrical_permit: 90,
      fee_calculation_method: "Flat fee",
    },
    turnaround: {
      typical_days: 7,
      expedited_available: false,
      expedited_fee: 0,
      expedited_days: 0,
    },
    solarapp_participant: false,
    notes:
      "Duke Energy territory. Research Triangle area has strong solar growth.",
    data_source: "seed_script_v1",
  },

  // ═══ ADDITIONAL TOP SOLAR MARKETS ═══
  {
    name: "Maricopa County - Planning and Development Department",
    jurisdiction_type: "county",
    state: "AZ",
    county: "Maricopa",
    city: "",
    zip_codes: [
      "85118",
      "85119",
      "85120",
      "85131",
      "85140",
      "85142",
      "85172",
      "85192",
      "85194",
    ],
    contact: {
      phone: "(602) 506-3301",
      website: "https://www.maricopa.gov/170/Planning-Development",
      address: "501 N. 44th St, Phoenix, AZ 85008",
    },
    portal: {
      url: "https://www.maricopa.gov/1720/Apply-Online",
      type: "web_form",
      automatable: true,
      automation_confidence: 0.65,
    },
    requirements: {
      structural_engineering: false,
      electrical_diagrams: true,
      site_plan: true,
      single_line_diagram: true,
      load_calculations: true,
      equipment_specs: true,
      hoa_approval: false,
      utility_approval: true,
      fire_department_review: false,
      custom_requirements: ["APS or SRP interconnection"],
    },
    fees: {
      residential_solar_permit: 200,
      commercial_solar_permit: 500,
      electrical_permit: 100,
      fee_calculation_method: "Flat fee",
    },
    turnaround: {
      typical_days: 7,
      expedited_available: false,
      expedited_fee: 0,
      expedited_days: 0,
    },
    solarapp_participant: false,
    notes: "Covers unincorporated Maricopa County. APS and SRP territories.",
    data_source: "seed_script_v1",
  },
  {
    name: "City of Mesa - Development Services",
    jurisdiction_type: "city",
    state: "AZ",
    county: "Maricopa",
    city: "Mesa",
    zip_codes: [
      "85201",
      "85202",
      "85203",
      "85204",
      "85205",
      "85206",
      "85207",
      "85208",
      "85209",
      "85210",
      "85212",
      "85213",
      "85215",
    ],
    contact: {
      phone: "(480) 644-2211",
      website: "https://www.mesaaz.gov/business/development-services",
      address: "55 N. Center St, Mesa, AZ 85201",
    },
    portal: {
      url: "https://eservices.mesaaz.gov/eTRAKiT/",
      type: "web_form",
      automatable: true,
      automation_confidence: 0.7,
    },
    requirements: {
      structural_engineering: false,
      electrical_diagrams: true,
      site_plan: true,
      single_line_diagram: true,
      load_calculations: true,
      equipment_specs: true,
      hoa_approval: false,
      utility_approval: true,
      fire_department_review: false,
      custom_requirements: ["SRP interconnection"],
    },
    fees: {
      residential_solar_permit: 175,
      commercial_solar_permit: 450,
      electrical_permit: 90,
      fee_calculation_method: "Flat fee",
    },
    turnaround: {
      typical_days: 5,
      expedited_available: false,
      expedited_fee: 0,
      expedited_days: 0,
    },
    solarapp_participant: true,
    notes:
      "SolarAPP+ participant. SRP territory. Large residential solar market.",
    data_source: "seed_script_v1",
  },
  {
    name: "City of Gilbert - Development Services",
    jurisdiction_type: "city",
    state: "AZ",
    county: "Maricopa",
    city: "Gilbert",
    zip_codes: ["85233", "85234", "85295", "85296", "85297", "85298"],
    contact: {
      phone: "(480) 503-6700",
      website: "https://www.gilbertaz.gov/departments/development-services",
      address: "90 E. Civic Center Dr, Gilbert, AZ 85296",
    },
    portal: {
      url: "https://aca-prod.accela.com/GILBERT/",
      type: "web_form",
      automatable: true,
      automation_confidence: 0.7,
    },
    requirements: {
      structural_engineering: false,
      electrical_diagrams: true,
      site_plan: true,
      single_line_diagram: true,
      load_calculations: true,
      equipment_specs: true,
      hoa_approval: true,
      utility_approval: true,
      fire_department_review: false,
      custom_requirements: ["SRP interconnection", "HOA common"],
    },
    fees: {
      residential_solar_permit: 150,
      commercial_solar_permit: 400,
      electrical_permit: 80,
      fee_calculation_method: "Flat fee",
    },
    turnaround: {
      typical_days: 3,
      expedited_available: false,
      expedited_fee: 0,
      expedited_days: 0,
    },
    solarapp_participant: true,
    notes:
      "SolarAPP+ participant. SRP territory. Fast turnaround. Many HOA communities.",
    data_source: "seed_script_v1",
  },
  {
    name: "City of Chandler - Development Services",
    jurisdiction_type: "city",
    state: "AZ",
    county: "Maricopa",
    city: "Chandler",
    zip_codes: ["85224", "85225", "85226", "85248", "85249", "85286"],
    contact: {
      phone: "(480) 782-3000",
      website:
        "https://www.chandleraz.gov/government/departments/development-services",
      address: "175 S. Arizona Ave, Chandler, AZ 85225",
    },
    portal: {
      url: "https://aca-prod.accela.com/CHANDLER/",
      type: "web_form",
      automatable: true,
      automation_confidence: 0.7,
    },
    requirements: {
      structural_engineering: false,
      electrical_diagrams: true,
      site_plan: true,
      single_line_diagram: true,
      load_calculations: true,
      equipment_specs: true,
      hoa_approval: true,
      utility_approval: true,
      fire_department_review: false,
      custom_requirements: ["SRP interconnection"],
    },
    fees: {
      residential_solar_permit: 150,
      commercial_solar_permit: 400,
      electrical_permit: 80,
      fee_calculation_method: "Flat fee",
    },
    turnaround: {
      typical_days: 3,
      expedited_available: false,
      expedited_fee: 0,
      expedited_days: 0,
    },
    solarapp_participant: true,
    notes: "SolarAPP+ participant. SRP territory. Fast permitting.",
    data_source: "seed_script_v1",
  },
  {
    name: "County of San Bernardino - Land Use Services",
    jurisdiction_type: "county",
    state: "CA",
    county: "San Bernardino",
    city: "",
    zip_codes: [
      "91710",
      "91730",
      "91739",
      "91761",
      "91764",
      "92307",
      "92308",
      "92311",
      "92345",
      "92371",
      "92392",
      "92394",
      "92404",
      "92405",
    ],
    contact: {
      phone: "(909) 387-8311",
      website: "https://lus.sbcounty.gov/",
      address: "385 N. Arrowhead Ave, San Bernardino, CA 92415",
    },
    portal: {
      url: "https://lus.sbcounty.gov/online-services/",
      type: "web_form",
      automatable: true,
      automation_confidence: 0.6,
    },
    requirements: {
      structural_engineering: true,
      electrical_diagrams: true,
      site_plan: true,
      single_line_diagram: true,
      load_calculations: true,
      equipment_specs: true,
      hoa_approval: false,
      utility_approval: true,
      fire_department_review: false,
      custom_requirements: [],
    },
    fees: {
      residential_solar_permit: 350,
      commercial_solar_permit: 850,
      electrical_permit: 175,
      fee_calculation_method: "Valuation-based",
    },
    turnaround: {
      typical_days: 14,
      expedited_available: false,
      expedited_fee: 0,
      expedited_days: 0,
    },
    solarapp_participant: false,
    notes:
      "Covers unincorporated SB County including Inland Empire. SCE territory.",
    data_source: "seed_script_v1",
  },
  {
    name: "City of Bakersfield - Building Division",
    jurisdiction_type: "city",
    state: "CA",
    county: "Kern",
    city: "Bakersfield",
    zip_codes: [
      "93301",
      "93304",
      "93305",
      "93306",
      "93307",
      "93308",
      "93309",
      "93311",
      "93312",
      "93313",
    ],
    contact: {
      phone: "(661) 326-3720",
      website: "https://www.bakersfieldcity.us/284/Building",
      address: "1715 Chester Ave, Bakersfield, CA 93301",
    },
    portal: {
      url: "https://aca-prod.accela.com/BAKERSFIELD/",
      type: "web_form",
      automatable: true,
      automation_confidence: 0.7,
    },
    requirements: {
      structural_engineering: false,
      electrical_diagrams: true,
      site_plan: true,
      single_line_diagram: true,
      load_calculations: true,
      equipment_specs: true,
      hoa_approval: false,
      utility_approval: true,
      fire_department_review: false,
      custom_requirements: [],
    },
    fees: {
      residential_solar_permit: 200,
      commercial_solar_permit: 500,
      electrical_permit: 100,
      fee_calculation_method: "Flat fee",
    },
    turnaround: {
      typical_days: 5,
      expedited_available: false,
      expedited_fee: 0,
      expedited_days: 0,
    },
    solarapp_participant: true,
    notes:
      "SolarAPP+ participant. PG&E territory. High solar irradiance, energy community area.",
    data_source: "seed_script_v1",
  },
  {
    name: "City of Stockton - Community Development Department",
    jurisdiction_type: "city",
    state: "CA",
    county: "San Joaquin",
    city: "Stockton",
    zip_codes: [
      "95202",
      "95203",
      "95204",
      "95205",
      "95206",
      "95207",
      "95209",
      "95210",
      "95211",
      "95212",
    ],
    contact: {
      phone: "(209) 937-8561",
      website:
        "https://www.stocktonca.gov/government/departments/communitydevelopment/",
      address: "345 N. El Dorado St, Stockton, CA 95202",
    },
    portal: {
      url: "https://aca-prod.accela.com/STOCKTON/",
      type: "web_form",
      automatable: true,
      automation_confidence: 0.7,
    },
    requirements: {
      structural_engineering: false,
      electrical_diagrams: true,
      site_plan: true,
      single_line_diagram: true,
      load_calculations: true,
      equipment_specs: true,
      hoa_approval: false,
      utility_approval: true,
      fire_department_review: false,
      custom_requirements: [],
    },
    fees: {
      residential_solar_permit: 200,
      commercial_solar_permit: 500,
      electrical_permit: 100,
      fee_calculation_method: "Flat fee",
    },
    turnaround: {
      typical_days: 5,
      expedited_available: false,
      expedited_fee: 0,
      expedited_days: 0,
    },
    solarapp_participant: false,
    notes: "PG&E territory. Central Valley — high solar production.",
    data_source: "seed_script_v1",
  },
  {
    name: "City of Fort Worth - Development Services",
    jurisdiction_type: "city",
    state: "TX",
    county: "Tarrant",
    city: "Fort Worth",
    zip_codes: [
      "76102",
      "76103",
      "76104",
      "76107",
      "76109",
      "76110",
      "76112",
      "76116",
      "76119",
      "76123",
      "76126",
      "76132",
      "76133",
      "76137",
      "76140",
      "76148",
    ],
    contact: {
      phone: "(817) 392-2222",
      website:
        "https://www.fortworthtexas.gov/departments/development-services",
      address: "200 Texas St, Fort Worth, TX 76102",
    },
    portal: {
      url: "https://www.fortworthtexas.gov/departments/development-services/permits",
      type: "web_form",
      automatable: true,
      automation_confidence: 0.65,
    },
    requirements: {
      structural_engineering: false,
      electrical_diagrams: true,
      site_plan: true,
      single_line_diagram: true,
      load_calculations: true,
      equipment_specs: true,
      hoa_approval: false,
      utility_approval: true,
      fire_department_review: false,
      custom_requirements: ["Oncor interconnection"],
    },
    fees: {
      residential_solar_permit: 150,
      commercial_solar_permit: 400,
      electrical_permit: 80,
      fee_calculation_method: "Flat fee",
    },
    turnaround: {
      typical_days: 7,
      expedited_available: false,
      expedited_fee: 0,
      expedited_days: 0,
    },
    solarapp_participant: false,
    notes: "Oncor T&D territory. Deregulated market. Growing solar adoption.",
    data_source: "seed_script_v1",
  },
  {
    name: "Broward County - Environmental and Consumer Protection Division",
    jurisdiction_type: "county",
    state: "FL",
    county: "Broward",
    city: "",
    zip_codes: [
      "33004",
      "33009",
      "33019",
      "33020",
      "33060",
      "33062",
      "33064",
      "33065",
      "33068",
      "33071",
      "33076",
      "33304",
      "33309",
      "33312",
      "33317",
      "33319",
      "33324",
      "33328",
      "33330",
      "33351",
    ],
    contact: {
      phone: "(954) 765-4400",
      website: "https://www.broward.org/Building/",
      address: "1 N. University Dr, Plantation, FL 33324",
    },
    portal: {
      url: "https://edocspub.broward.org/EPPSWEB/",
      type: "web_form",
      automatable: true,
      automation_confidence: 0.6,
    },
    requirements: {
      structural_engineering: true,
      electrical_diagrams: true,
      site_plan: true,
      single_line_diagram: true,
      load_calculations: true,
      equipment_specs: true,
      hoa_approval: false,
      utility_approval: true,
      fire_department_review: false,
      custom_requirements: [
        "Wind load calculations",
        "FPL interconnection",
        "NOA required for panels",
      ],
    },
    fees: {
      residential_solar_permit: 350,
      commercial_solar_permit: 850,
      electrical_permit: 175,
      fee_calculation_method: "Valuation-based",
    },
    turnaround: {
      typical_days: 14,
      expedited_available: true,
      expedited_fee: 700,
      expedited_days: 5,
    },
    solarapp_participant: false,
    notes:
      "HVHZ (High-Velocity Hurricane Zone). FPL territory. Strict wind load requirements.",
    data_source: "seed_script_v1",
  },
  {
    name: "Palm Beach County - Building Division",
    jurisdiction_type: "county",
    state: "FL",
    county: "Palm Beach",
    city: "",
    zip_codes: [
      "33401",
      "33405",
      "33407",
      "33409",
      "33411",
      "33415",
      "33417",
      "33426",
      "33428",
      "33431",
      "33433",
      "33435",
      "33445",
      "33460",
      "33462",
      "33463",
      "33467",
      "33470",
      "33472",
      "33484",
    ],
    contact: {
      phone: "(561) 233-5100",
      website: "https://discover.pbcgov.org/pzb/building/",
      address: "2300 N. Jog Rd, West Palm Beach, FL 33411",
    },
    portal: {
      url: "https://ezbp.pbcgov.org/",
      type: "web_form",
      automatable: true,
      automation_confidence: 0.65,
    },
    requirements: {
      structural_engineering: true,
      electrical_diagrams: true,
      site_plan: true,
      single_line_diagram: true,
      load_calculations: true,
      equipment_specs: true,
      hoa_approval: false,
      utility_approval: true,
      fire_department_review: false,
      custom_requirements: ["Wind load calculations", "FPL interconnection"],
    },
    fees: {
      residential_solar_permit: 300,
      commercial_solar_permit: 750,
      electrical_permit: 150,
      fee_calculation_method: "Valuation-based",
    },
    turnaround: {
      typical_days: 10,
      expedited_available: true,
      expedited_fee: 600,
      expedited_days: 3,
    },
    solarapp_participant: false,
    notes:
      "FPL territory. Large residential solar market. Many HOA communities.",
    data_source: "seed_script_v1",
  },
  {
    name: "City of Henderson - Community Development and Services",
    jurisdiction_type: "city",
    state: "NV",
    county: "Clark",
    city: "Henderson",
    zip_codes: [
      "89002",
      "89011",
      "89012",
      "89014",
      "89015",
      "89044",
      "89052",
      "89074",
    ],
    contact: {
      phone: "(702) 267-1500",
      website:
        "https://www.cityofhenderson.com/government/departments/community-development-and-services",
      address: "240 S. Water St, Henderson, NV 89015",
    },
    portal: {
      url: "https://www.cityofhenderson.com/government/departments/community-development-and-services/building-and-fire-safety",
      type: "web_form",
      automatable: true,
      automation_confidence: 0.65,
    },
    requirements: {
      structural_engineering: false,
      electrical_diagrams: true,
      site_plan: true,
      single_line_diagram: true,
      load_calculations: true,
      equipment_specs: true,
      hoa_approval: true,
      utility_approval: true,
      fire_department_review: false,
      custom_requirements: ["NV Energy interconnection"],
    },
    fees: {
      residential_solar_permit: 200,
      commercial_solar_permit: 500,
      electrical_permit: 100,
      fee_calculation_method: "Flat fee",
    },
    turnaround: {
      typical_days: 7,
      expedited_available: false,
      expedited_fee: 0,
      expedited_days: 0,
    },
    solarapp_participant: false,
    notes: "NV Energy territory. Many master-planned communities with HOAs.",
    data_source: "seed_script_v1",
  },
  {
    name: "City of North Las Vegas - Building and Safety",
    jurisdiction_type: "city",
    state: "NV",
    county: "Clark",
    city: "North Las Vegas",
    zip_codes: ["89030", "89031", "89032", "89081", "89084", "89085", "89086"],
    contact: {
      phone: "(702) 633-1536",
      website:
        "https://www.cityofnorthlasvegas.com/departments/building-safety",
      address: "2250 Las Vegas Blvd N, North Las Vegas, NV 89030",
    },
    portal: {
      url: "https://www.cityofnorthlasvegas.com/departments/building-safety/permits",
      type: "web_form",
      automatable: true,
      automation_confidence: 0.6,
    },
    requirements: {
      structural_engineering: false,
      electrical_diagrams: true,
      site_plan: true,
      single_line_diagram: true,
      load_calculations: true,
      equipment_specs: true,
      hoa_approval: false,
      utility_approval: true,
      fire_department_review: false,
      custom_requirements: ["NV Energy interconnection"],
    },
    fees: {
      residential_solar_permit: 175,
      commercial_solar_permit: 450,
      electrical_permit: 90,
      fee_calculation_method: "Flat fee",
    },
    turnaround: {
      typical_days: 7,
      expedited_available: false,
      expedited_fee: 0,
      expedited_days: 0,
    },
    solarapp_participant: false,
    notes: "NV Energy territory. Rapid growth area north of Las Vegas.",
    data_source: "seed_script_v1",
  },
  {
    name: "Lee County - Building Services",
    jurisdiction_type: "county",
    state: "FL",
    county: "Lee",
    city: "",
    zip_codes: [
      "33901",
      "33903",
      "33905",
      "33907",
      "33908",
      "33912",
      "33913",
      "33914",
      "33919",
      "33931",
      "33936",
      "33966",
      "33971",
      "33990",
      "33991",
    ],
    contact: {
      phone: "(239) 533-8585",
      website: "https://www.leegov.com/dcd/bldg",
      address: "1500 Monroe St, Fort Myers, FL 33901",
    },
    portal: {
      url: "https://www.leegov.com/dcd/bldg/OnlinePermits",
      type: "web_form",
      automatable: true,
      automation_confidence: 0.65,
    },
    requirements: {
      structural_engineering: true,
      electrical_diagrams: true,
      site_plan: true,
      single_line_diagram: true,
      load_calculations: true,
      equipment_specs: true,
      hoa_approval: false,
      utility_approval: true,
      fire_department_review: false,
      custom_requirements: [
        "Wind load calculations",
        "FPL or LCEC interconnection",
      ],
    },
    fees: {
      residential_solar_permit: 275,
      commercial_solar_permit: 700,
      electrical_permit: 140,
      fee_calculation_method: "Flat fee",
    },
    turnaround: {
      typical_days: 10,
      expedited_available: false,
      expedited_fee: 0,
      expedited_days: 0,
    },
    solarapp_participant: false,
    notes:
      "Fort Myers / Cape Coral area. FPL and LCEC utility territories. Hurricane zone.",
    data_source: "seed_script_v1",
  },
];

// ─── Seeding Logic ────────────────────────────────────────────────────────────

async function seedAhjData() {
  console.log(`Seeding ${AHJ_DATA.length} AHJ records to ahj_registry...`);

  const batch = db.batch();
  const now = admin.firestore.FieldValue.serverTimestamp();
  let count = 0;

  for (const ahj of AHJ_DATA) {
    const docRef = db.collection("ahj_registry").doc();
    batch.set(docRef, {
      ...ahj,
      created_at: now,
      updated_at: now,
      last_verified: null,
      verified_by: "",
    });
    count++;

    // Firestore batches are limited to 500 operations
    // We're well under that with 50 records, but check anyway
    if (count % 400 === 0) {
      await batch.commit();
      console.log(`  Committed batch of ${count} records...`);
    }
  }

  await batch.commit();
  console.log(`Done! Seeded ${count} AHJ records.`);

  // Print summary by state
  const byState = {};
  for (const ahj of AHJ_DATA) {
    byState[ahj.state] = (byState[ahj.state] || 0) + 1;
  }
  console.log("\nCoverage by state:");
  for (const [state, ct] of Object.entries(byState).sort(
    (a, b) => b[1] - a[1],
  )) {
    console.log(`  ${state}: ${ct} AHJs`);
  }

  const solarappCount = AHJ_DATA.filter((a) => a.solarapp_participant).length;
  const automatableCount = AHJ_DATA.filter((a) => a.portal?.automatable).length;
  console.log(`\nSolarAPP+ participants: ${solarappCount}`);
  console.log(`Automatable portals: ${automatableCount}`);
  console.log(
    `Total ZIP codes covered: ${AHJ_DATA.reduce((sum, a) => sum + (a.zip_codes?.length || 0), 0)}`,
  );
}

seedAhjData()
  .then(() => {
    console.log("\nSeed complete.");
    process.exit(0);
  })
  .catch((error) => {
    console.error("Seed failed:", error);
    process.exit(1);
  });
